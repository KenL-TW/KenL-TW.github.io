<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¶²è·¯æ”»æ“Šè¦–è¦ºåŒ–æ•™å­¸</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 900px;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            padding: 30px;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .header {
            text-align: center;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 20px;
        }

        .header h1 {
            font-size: 2.25rem;
            font-weight: 700;
            color: #1f2937;
            margin: 0;
        }

        .header p {
            font-size: 1rem;
            color: #6b7280;
            margin-top: 8px;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .sql-btn-container {
            display: flex;
            gap: 15px;
        }
        
        .control-btn {
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: 600;
            color: #ffffff;
            border-radius: 8px;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
        }

        .sql-btn { background-color: #3b82f6; }
        .sql-btn:hover { background-color: #2563eb; transform: translateY(-2px); }

        .xss-btn { background-color: #f97316; }
        .xss-btn:hover { background-color: #ea580c; transform: translateY(-2px); }

        .safe-sql-btn { background-color: #10b981; }
        .safe-sql-btn:hover { background-color: #059669; transform: translateY(-2px); }

        .reset-btn { background-color: #9ca3af; }
        .reset-btn:hover { background-color: #6b7280; transform: translateY(-2px); }

        .status-message {
            background-color: #fef3c7;
            color: #92400e;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
        }
        
        /* æ ¸å¿ƒå‹•ç•«å€å¡Š */
        .core-area {
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 20px;
            min-height: 350px;
            position: relative;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* æ”»æ“Šæµç¨‹åœ–é€šç”¨æ¨£å¼ */
        .flow-diagram {
            display: flex;
            justify-content: space-around;
            align-items: center;
            width: 100%;
            height: 100%;
            position: relative;
        }

        .node {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            text-align: center;
        }
        .node-icon {
            width: 80px;
            height: 80px;
            background-color: #f3f4f6;
            border: 2px solid #d1d5db;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.5rem;
            color: #4b5563;
        }
        .node-icon span {
            font-size: 3rem;
            line-height: 1;
        }

        .node-label {
            font-weight: 600;
            color: #4b5563;
        }
        
        .login-form {
            position: absolute;
            top: 20%;
            left: 20%;
            transform: translate(-50%, -50%);
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding: 15px;
            background-color: #ffffff;
            border: 1px solid #d1d5db;
            border-radius: 8px;
        }
        .login-form input {
            border: 1px solid #d1d5db;
            border-radius: 6px;
            padding: 8px;
        }

        /* è³‡æ–™åŒ…å‹•ç•« */
        .packet {
            position: absolute;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            transition: transform 1.5s ease-in-out, background-color 0.5s;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
        }
        .packet.sql-packet { background-color: #ef4444; }
        .packet.xss-packet { background-color: #3b82f6; }
        .packet.safe-packet { background-color: #10b981; }

        /* SQL æ³¨å…¥å‹•ç•«è·¯å¾‘ */
        .packet.sql-1 { top: 40%; left: 15%; }
        .packet.sql-2 { transform: translateX(180px); }
        .packet.sql-3 { transform: translateX(360px); }
        .packet.sql-4 { transform: translateX(540px); }
        .packet.sql-success { transform: translateX(540px) translateY(100px); }
        
        /* XSS å‹•ç•«è·¯å¾‘ */
        .packet.xss-1 { top: 40%; left: 15%; }
        .packet.xss-2 { transform: translateX(200px); }
        .packet.xss-3 { transform: translateX(400px); }
        .packet.xss-4 { transform: translateX(400px) translateY(150px); }
        
        /* å®‰å…¨ç™»å…¥å‹•ç•«è·¯å¾‘ */
        .packet.safe-1 { top: 40%; left: 15%; }
        .packet.safe-2 { transform: translateX(180px); }
        .packet.safe-3 { transform: translateX(360px); }
        .packet.safe-4 { transform: translateX(540px); }

        /* è³‡æ–™åº«å€å¡Š */
        .db-section, .xss-section {
            display: none;
            flex-direction: column;
            gap: 15px;
            padding: 20px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            background-color: #f9fafb;
        }
        .db-section.visible, .xss-section.visible {
            display: flex;
        }
        .db-code {
            background-color: #1f2937;
            color: #d1d5db;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            white-space: pre;
            position: relative;
        }
        .db-code .red-text { color: #f87171; }
        .db-code .leak { animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0.5; } }

        /* XSS è©•è«–å€å¡Š */
        .comment-box {
            display: flex;
            flex-direction: column;
            gap: 10px;
            background-color: #ffffff;
            padding: 15px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
        }
        .comment-box textarea {
            width: 100%;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            padding: 10px;
            resize: vertical;
            min-height: 60px;
        }
        .comment-box button {
            background-color: #3b82f6;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .comment-box button:hover { background-color: #2563eb; }

        .comments-display {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .comment {
            background-color: #f3f4f6;
            padding: 10px;
            border-radius: 6px;
            font-size: 0.9rem;
            color: #4b5563;
        }

        .user-icon { background-color: #93c5fd; }
        .server-icon { background-color: #6ee7b7; }
        .db-icon { background-color: #fca5a5; }
        .victim-icon { background-color: #a78bfa; }

        /* Modal for fake alert */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            text-align: center;
            max-width: 400px;
            font-size: 1.1rem;
            position: relative;
        }
        
        .modal-close {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 1.5rem;
            font-weight: bold;
            color: #999;
            cursor: pointer;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: #ef4444;
        }

        .modal-message {
            margin-bottom: 20px;
        }

        .modal-button {
            padding: 10px 25px;
            background-color: #3b82f6;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .modal-button:hover {
            background-color: #2563eb;
        }

        .log-console {
            background-color: #1f2937;
            color: #d1d5db;
            padding: 15px;
            border-radius: 8px;
            min-height: 100px;
            max-height: 200px;
            overflow-y: auto;
            white-space: pre-wrap;
            font-size: 0.875rem;
            border: 2px solid #e5e7eb;
        }

        .log-line {
            line-height: 1.5;
            padding: 3px 0;
            border-bottom: 1px dashed #4b5563;
        }
        .log-line:last-child {
            border-bottom: none;
        }

        .log-title { color: #f59e0b; }
        .log-info { color: #a5b4fc; }
        .log-success { color: #34d399; }
        .log-error { color: #ef4444; }
        .back-fab {
        position: fixed;
        left: 1rem;
        bottom: 1rem;   /* å¯æ”¹ç‚º top: 1rem; è®Šæˆå·¦ä¸Šè§’æµ®å‹• */
        z-index: 1080;  /* é«˜æ–¼ä¸€èˆ¬å…§å®¹ï¼Œä½æ–¼ Offcanvas/Modal */
        padding: .75rem 1.25rem;
        }
        @media (max-width: 767.98px) {
        .back-fab {
            left: .75rem;
            bottom: .75rem;
            padding: .625rem 1rem;
        }}
    </style>
</head>
<body>

<div id="app" class="container">
    
    <div class="header">
        <h1>ç¶²è·¯æ”»æ“Šè¦–è¦ºåŒ–æ•™å­¸</h1>
        <a href="../index.html"
        class="btn btn-primary btn-lg rounded-pill shadow back-fab d-none d-md-inline-flex"
        aria-label="è¿”å›é¦–é ï¼ˆå¿«æ·éµ Hï¼‰"
        aria-keyshortcuts="H">
        <i class="bi bi-house-door me-2"></i> å›é¦–é 
        </a>
        <p>é€éå‹•ç•«æµç¨‹ï¼Œè¼•é¬†äº†è§£ SQL æ³¨å…¥èˆ‡è·¨ç¶²ç«™è…³æœ¬æ”»æ“Šï¼ˆXSSï¼‰çš„åŸç†ã€‚</p>
    </div>

    <div class="controls">
        <div class="sql-btn-container">
            <button class="control-btn sql-btn" @click="animateSqlInjection" :disabled="isAnimating">ç¤ºç¯„ SQL æ³¨å…¥</button>
            <button class="control-btn safe-sql-btn" @click="animateSafeSqlLogin" :disabled="isAnimating">ç¤ºç¯„å®‰å…¨ç™»å…¥</button>
        </div>
        <button class="control-btn xss-btn" @click="animateXss" :disabled="isAnimating">ç¤ºç¯„ XSS</button>
        <button class="control-btn reset-btn" @click="resetUI" :disabled="isAnimating">é‡è¨­</button>
    </div>

    <div class="status-message">{{ statusMessage }}</div>

    <div class="core-area">
        <div v-if="!isSqlVisible && !isXssVisible" class="initial-state">
            <div class="node">
                <div class="node-icon user-icon"><span>ğŸ‘¨â€ğŸ’»</span></div>
                <span class="node-label">ä½¿ç”¨è€…</span>
            </div>
        </div>

        <!-- SQL æ³¨å…¥æµç¨‹åœ– -->
        <div v-if="isSqlVisible" class="flow-diagram">
            <div class="node">
                <div class="node-icon user-icon"><span>ğŸ‘¨â€ğŸ’»</span></div>
                <span class="node-label">ä½¿ç”¨è€…</span>
            </div>
            <div class="node">
                <div class="node-icon server-icon"><span>ğŸ–¥ï¸</span></div>
                <span class="node-label">ç¶²é ä¼ºæœå™¨</span>
            </div>
            <div class="node">
                <div class="node-icon db-icon"><span>ğŸ—„ï¸</span></div>
                <span class="node-label">è³‡æ–™åº«</span>
            </div>
            <div :class="['packet', { 'sql-packet': sqlPayload.isVulnerable }, { 'safe-packet': !sqlPayload.isVulnerable }, packetClass]">
                <span v-if="sqlPayload.isVulnerable">ğŸ’¥</span>
                <span v-else>âœ…</span>
            </div>
        </div>

        <!-- XSS æ”»æ“Šæµç¨‹åœ– -->
        <div v-if="isXssVisible" class="flow-diagram">
            <div class="node">
                <div class="node-icon user-icon"><span>ğŸ˜ˆ</span></div>
                <span class="node-label">æ”»æ“Šè€…</span>
            </div>
            <div class="node">
                <div class="node-icon server-icon"><span>ğŸ–¥ï¸</span></div>
                <span class="node-label">ä¼ºæœå™¨</span>
            </div>
            <div class="node">
                <div class="node-icon victim-icon"><span>ğŸ˜¢</span></div>
                <span class="node-label">å—å®³è€…</span>
            </div>
            <div :class="['packet', 'xss-packet', packetClass]">
                <span>ğŸ¦ </span>
            </div>
        </div>
        
        <!-- SQL ç™»å…¥è¡¨å–® -->
        <div v-if="isSqlVisible" class="login-form">
            <label for="username">ä½¿ç”¨è€…åç¨±</label>
            <input type="text" id="username" v-model="sqlPayload.username" :disabled="isAnimating" />
            <label for="password">å¯†ç¢¼</label>
            <input type="password" id="password" v-model="sqlPayload.password" :disabled="isAnimating" />
        </div>
    </div>

    <!-- æ—¥èªŒæ§åˆ¶å° -->
    <div class="log-console">
        <p v-for="(log, index) in logMessages" :key="index" :class="['log-line', 'log-' + log.type]">
            <span class="log-title">[{{ log.time }}]</span> {{ log.message }}
        </p>
    </div>

    <!-- è³‡æ–™åº«å€å¡Š -->
    <div :class="['db-section', { 'visible': isSqlVisible }]">
        <h2>è³‡æ–™åº«ç‹€æ…‹</h2>
        <div class="db-code">
            <pre><code v-html="sqlCode"></code></pre>
        </div>
    </div>

    <!-- XSS è©•è«–å€å¡Š -->
    <div :class="['xss-section', { 'visible': isXssVisible }]">
        <h2>ç¶²é è©•è«–å€</h2>
        <div class="comment-box">
            <p><strong>æ”»æ“Šè€…ç™¼å¸ƒæƒ¡æ„è©•è«–</strong></p>
            <textarea readonly>{{ xssPayload }}</textarea>
            <button @click="xssPostComment">ç™¼ä½ˆè©•è«–</button>
        </div>
        <div class="comments-display">
            <div class="comment" v-if="commentPosted">
                <p><strong>æ”»æ“Šè€… (å·²ç™¼ä½ˆ)</strong></p>
                <p>{{ xssComment }}</p>
            </div>
        </div>
    </div>

    <!-- Custom Modal -->
    <div v-if="modal.show" class="modal">
        <div class="modal-content">
            <span class="modal-close" @click="hideModal">&times;</span>
            <p class="modal-title">{{ modal.title }}</p>
            <p class="modal-message" v-html="modal.message"></p>
            <button class="modal-button" @click="hideModal">ç¢ºèª</button>
        </div>
    </div>
</div>

<script>
    const { createApp, ref, reactive, computed } = Vue;

    createApp({
        setup() {
            const statusMessage = ref('é»æ“ŠæŒ‰éˆ•é–‹å§‹ç¤ºç¯„...');
            const isSqlVisible = ref(false);
            const isXssVisible = ref(false);
            const packetClass = ref('');
            const dbLeaked = ref(false);
            const xssPayload = ref('<script>alert("æ‚¨å·²è¢«XSSæ”»æ“Šï¼")</' + 'script>');
            const xssComment = ref('');
            const commentPosted = ref(false);
            const isAnimating = ref(false);
            const logMessages = reactive([]);
            const modal = reactive({ show: false, title: '', message: '' });

            const sqlPayload = reactive({
                username: "' OR '1'='1",
                password: "",
                isVulnerable: true
            });

            // Computed property to generate dynamic SQL code with highlighting
            const sqlCode = computed(() => {
                let code = `CREATE TABLE users (
    id INT,
    username VARCHAR(255),
    password VARCHAR(255)
);

INSERT INTO users (username, password) VALUES
('admin', 'admin_password'),
('user1', 'user1_password');

`;
                if (sqlPayload.isVulnerable) {
                    const injectedUser = sqlPayload.username.replace(/'/g, "\\'");
                    const injectedPass = sqlPayload.password.replace(/'/g, "\\'");
                    const vulnerableQuery = `SELECT * FROM users WHERE username = '${injectedUser}' AND password = '${injectedPass}'`;
                    
                    code += `// æ‡‰ç”¨ç¨‹å¼å¾Œç«¯ç¨‹å¼ç¢¼ - éŒ¯èª¤çš„å¯«æ³• (å®¹æ˜“è¢«æ³¨å…¥)
// const query = "SELECT * FROM users WHERE username = '" + username + "' AND password = '" + password + "'";
//
// å¯¦éš›åŸ·è¡ŒæŸ¥è©¢:
// <span class="red-text">SELECT * FROM users WHERE username = '${injectedUser}' AND password = '${injectedPass}'</span>
`;
                } else {
                    const safeQuery = `SELECT * FROM users WHERE username = ? AND password = ?`;
                    const escapedUser = sqlPayload.username.replace(/'/g, "''").replace(/OR/g, "''OR''");
                    const escapedPass = sqlPayload.password.replace(/'/g, "''").replace(/OR/g, "''OR''");
                    code += `// æ‡‰ç”¨ç¨‹å¼å¾Œç«¯ç¨‹å¼ç¢¼ - æ­£ç¢ºçš„å¯«æ³• (ä½¿ç”¨åƒæ•¸åŒ–æŸ¥è©¢)
// const query = "SELECT * FROM users WHERE username = ? AND password = ?";
// const params = [username, password];
//
// å¯¦éš›åŸ·è¡ŒæŸ¥è©¢:
// SELECT * FROM users WHERE username = '${escapedUser}' AND password = '${escapedPass}'
`;
                }

                code += `
//
// æŸ¥è©¢çµæœ: 
<span class="red-text" style="${dbLeaked.value ? 'font-weight: bold; animation: blink 1s infinite;' : ''}">id: 1, username: 'admin', password: 'admin_password'</span>
id: 2, username: 'user1', password: 'user1_password'
`;
                return code;
            });

            const showModal = (title, message) => {
                modal.title = title;
                modal.message = message;
                modal.show = true;
            };

            const hideModal = () => {
                modal.show = false;
            };

            const addLog = (message, type = 'info') => {
                const now = new Date();
                const timeString = now.toLocaleTimeString('zh-TW', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
                logMessages.push({ time: timeString, message, type });
            };

            const delay = (ms) => new Promise(res => setTimeout(res, ms));

            const resetUI = () => {
                isAnimating.value = false;
                statusMessage.value = 'å·²é‡è¨­ã€‚é»æ“ŠæŒ‰éˆ•é–‹å§‹ç¤ºç¯„...';
                isSqlVisible.value = false;
                isXssVisible.value = false;
                packetClass.value = '';
                dbLeaked.value = false;
                xssComment.value = '';
                commentPosted.value = false;
                sqlPayload.username = "' OR '1'='1";
                sqlPayload.password = "";
                sqlPayload.isVulnerable = true;
                logMessages.length = 0;
                hideModal();
            };

            const animateSqlInjection = async () => {
                resetUI();
                isAnimating.value = true;
                isSqlVisible.value = true;
                
                addLog('==== é–‹å§‹ SQL æ³¨å…¥æ”»æ“Šç¤ºç¯„ ====');
                addLog('æ­¥é©Ÿ 1/4: æ”»æ“Šè€…è¼¸å…¥æƒ¡æ„å­—ä¸²... ', 'info');
                statusMessage.value = 'æ­¥é©Ÿ 1/4: æ”»æ“Šè€…ç™¼é€æƒ¡æ„ç™»å…¥è«‹æ±‚...';
                
                packetClass.value = 'sql-1';
                await delay(1500);

                addLog('æ­¥é©Ÿ 2/4: æƒ¡æ„è«‹æ±‚æŠµé”ç¶²é ä¼ºæœå™¨', 'info');
                addLog('ä¼ºæœå™¨æœªç¶“è™•ç†ï¼Œç›´æ¥å°‡è¼¸å…¥æ‹¼æ¥åˆ° SQL æŸ¥è©¢ä¸­ã€‚', 'error');
                statusMessage.value = 'æ­¥é©Ÿ 2/4: è«‹æ±‚æŠµé”ç¶²é ä¼ºæœå™¨ï¼Œä¸¦è¢«**ä¸å®‰å…¨åœ°**å‚³é€åˆ°è³‡æ–™åº«ã€‚';
                
                packetClass.value = 'sql-2';
                await delay(1500);

                addLog('æ­¥é©Ÿ 3/4: è³‡æ–™åº«æ¥æ”¶åˆ°æƒ¡æ„æŸ¥è©¢', 'info');
                addLog('ç”±æ–¼èªæ³•æœ‰æ•ˆï¼Œè³‡æ–™åº«è¢«æ¬ºé¨™ï¼ŒåŸ·è¡Œäº†é æœŸå¤–çš„æŒ‡ä»¤ã€‚', 'success');
                statusMessage.value = 'æ­¥é©Ÿ 3/4: è³‡æ–™åº«è¢«æ¬ºé¨™ï¼ŒåŸ·è¡Œäº†æƒ¡æ„æŒ‡ä»¤ã€‚';
                
                packetClass.value = 'sql-3';
                await delay(1500);
                
                addLog('æ­¥é©Ÿ 4/4: æ”»æ“ŠæˆåŠŸï¼è³‡æ–™åº«è¿”å›æ‰€æœ‰å…§å®¹ã€‚', 'success');
                statusMessage.value = 'æ­¥é©Ÿ 4/4: æ”»æ“ŠæˆåŠŸï¼è³‡æ–™è¢«æ´©éœ²ï¼';
                packetClass.value = 'sql-success';
                dbLeaked.value = true;
                await delay(1500);
                
                addLog('==== SQL æ³¨å…¥æ”»æ“Šç¤ºç¯„å®Œæˆï¼ ====');
                isAnimating.value = false;
            };
            
            const animateSafeSqlLogin = async () => {
                resetUI();
                isAnimating.value = true;
                isSqlVisible.value = true;
                sqlPayload.isVulnerable = false;
                
                addLog('==== é–‹å§‹å®‰å…¨ç™»å…¥ç¤ºç¯„ ====');
                addLog('æ­¥é©Ÿ 1/4: ä¼ºæœå™¨ç™¼é€å®‰å…¨è«‹æ±‚... ', 'info');
                statusMessage.value = 'æ­¥é©Ÿ 1/4: ä¼ºæœå™¨ç™¼é€å®‰å…¨è«‹æ±‚...';

                packetClass.value = 'safe-1';
                await delay(1500);

                addLog('æ­¥é©Ÿ 2/4: è«‹æ±‚ä½¿ç”¨**åƒæ•¸åŒ–æŸ¥è©¢**å‚³é€åˆ°è³‡æ–™åº«', 'success');
                statusMessage.value = 'æ­¥é©Ÿ 2/4: è«‹æ±‚ä½¿ç”¨**åƒæ•¸åŒ–æŸ¥è©¢**å‚³é€åˆ°è³‡æ–™åº«ã€‚';
                packetClass.value = 'safe-2';
                await delay(1500);
                
                addLog('æ­¥é©Ÿ 3/4: è³‡æ–™åº«å°‡è¼¸å…¥è¦–ç‚ºç´”ç²¹çš„è³‡æ–™ï¼Œè€ŒéæŒ‡ä»¤', 'info');
                statusMessage.value = 'æ­¥é©Ÿ 3/4: è³‡æ–™åº«å°‡è¼¸å…¥è¦–ç‚ºç´”ç²¹çš„è³‡æ–™ï¼Œè€Œä¸æ˜¯å¯åŸ·è¡Œçš„æŒ‡ä»¤ã€‚';
                packetClass.value = 'safe-3';
                await delay(1500);

                addLog('æ­¥é©Ÿ 4/4: æŸ¥è©¢å¤±æ•—ï¼Œæœªæ‰¾åˆ°åŒ¹é…çš„ç”¨æˆ¶', 'info');
                addLog('æ”»æ“Šè¢«æœ‰æ•ˆé˜»æ­¢ï¼', 'success');
                statusMessage.value = 'æ­¥é©Ÿ 4/4: æŸ¥è©¢å¤±æ•—ï¼Œå› ç‚ºæ²’æœ‰æ‰¾åˆ°ç›¸æ‡‰çš„ä½¿ç”¨è€…åç¨±ã€‚';
                packetClass.value = 'safe-4';
                await delay(1500);

                addLog('==== å®‰å…¨ç™»å…¥ç¤ºç¯„å®Œæˆï¼ ====');
                isAnimating.value = false;
            };

            const xssPostComment = () => {
                xssComment.value = xssPayload.value;
                commentPosted.value = true;
                statusMessage.value = 'æƒ¡æ„è…³æœ¬å·²ç™¼ä½ˆåˆ°è©•è«–å€ã€‚';
            };

            const animateXss = async () => {
                resetUI();
                isAnimating.value = true;
                isXssVisible.value = true;
                
                addLog('==== é–‹å§‹è·¨ç¶²ç«™è…³æœ¬æ”»æ“Š (XSS) ç¤ºç¯„ ====');
                addLog('æ­¥é©Ÿ 1/4: æ”»æ“Šè€…æäº¤åŒ…å«æƒ¡æ„è…³æœ¬çš„è©•è«–...', 'info');
                statusMessage.value = 'æ­¥é©Ÿ 1/4: æ”»æ“Šè€…æäº¤åŒ…å«æƒ¡æ„è…³æœ¬çš„è©•è«–...';
                packetClass.value = 'xss-1';
                await delay(1500);

                addLog('æ­¥é©Ÿ 2/4: æƒ¡æ„è©•è«–è¢«ä¼ºæœå™¨å„²å­˜ã€‚', 'info');
                statusMessage.value = 'æ­¥é©Ÿ 2/4: è©•è«–è¢«ä¼ºæœå™¨å„²å­˜ï¼ŒåŒ…å«æƒ¡æ„è…³æœ¬ã€‚';
                packetClass.value = 'xss-2';
                xssPostComment();
                await delay(1500);
                
                addLog('æ­¥é©Ÿ 3/4: å—å®³è€…è¨ªå•é é¢ï¼Œä¼ºæœå™¨å°‡æƒ¡æ„è…³æœ¬è¿”å›ã€‚', 'info');
                statusMessage.value = 'æ­¥é©Ÿ 3/4: å—å®³è€…è¨ªå•é é¢ï¼Œä¼ºæœå™¨å°‡æƒ¡æ„è…³æœ¬å‚³é€çµ¦ä»–ã€‚';
                packetClass.value = 'xss-3';
                await delay(1500);

                addLog('æ­¥é©Ÿ 4/4: æƒ¡æ„è…³æœ¬åœ¨å—å®³è€…ç€è¦½å™¨ä¸ŠåŸ·è¡Œï¼', 'error');
                statusMessage.value = 'æ­¥é©Ÿ 4/4: å—å®³è€…çš„ç€è¦½å™¨åŸ·è¡Œæƒ¡æ„è…³æœ¬ï¼Œæ”»æ“ŠæˆåŠŸï¼';
                packetClass.value = 'xss-4';
                showModal("ğŸš¨ æ‚¨å·²è¢«XSSæ”»æ“Šï¼", "æƒ¡æ„è…³æœ¬æˆåŠŸåŸ·è¡Œï¼<br>ä»¥ä¸‹æ˜¯ç«Šå–çš„æ©Ÿå¯†è³‡è¨Šï¼š<br><br><b>Cookie:</b> `secret_session_id_12345`");
                await delay(1500);

                addLog('==== XSS æ”»æ“Šç¤ºç¯„å®Œæˆï¼ ====');
                isAnimating.value = false;
            };

            return {
                statusMessage,
                isSqlVisible,
                isXssVisible,
                packetClass,
                dbLeaked,
                xssPayload,
                xssComment,
                commentPosted,
                sqlPayload,
                isAnimating,
                logMessages,
                modal,
                sqlCode,
                resetUI,
                animateSqlInjection,
                animateXss,
                animateSafeSqlLogin,
                showModal,
                hideModal
            };
        }
    }).mount('#app');
</script>

</body>
</html>


